{% extends 'layout.html.twig' %}

{% block title %}All Tasks - WorkFlow{% endblock %}

{% block content %}
{# Determine filtered project ID: only if exactly one project is filtered #}
{% set filteredProjectId = filter.projectIds|length == 1 ? filter.projectIds|first : '' %}

{% include 'task/_task_page.html.twig' with {
    pageTitle: 'All Tasks',
    pageDescription: isAdmin ? 'All tasks in the system (except private ones).' : 'All tasks from your projects.',
    formAction: 'app_task_all_tasks',
    tasks: tasks,
    tasksByStatus: tasksByStatus,
    tasksByPriority: tasksByPriority,
    tasksByMilestone: tasksByMilestone,
    milestones: milestones,
    kanbanModeKey: 'all_tasks_kanban_mode',
    filter: filter,
    userProjects: userProjects,
    projectMembers: projectMembers,
    showProjectFilter: true,
    storageKey: 'all_tasks_view',
    showHeader: true,
    showAddButton: false,
    availableProjects: editableProjects,
    filteredProjectId: filteredProjectId,
    canEdit: true
} %}
{% endblock %}
